<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style.css">
    <title>Cadastro</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>


</head>

<body id="tela-cadastro">
    <div class="box" id="box-cadastro">
        <div class="fundo" id="fundo-cadastro">
            <h1 id="titulo-cadastro">Cadastro</h1>

            <input type="email" class="input" id="email" placeholder="E-mail" required>
            <input type="text" class="input" id="nome" placeholder="Nome" required>
            <div id="div-data-nasc">
                <label for="data-nasc" id="label-data-nasc">Data de Nascimento:</label>
                <input type="date" class="input" id="data-nasc" placeholder="Data de Nascimento" required>
            </div>
            <input type="password" class="input" id="senha" placeholder="Senha" required>
            <input type="password" class="input" id="confirmar-senha" placeholder="Confirmar Senha" required>

            <button class="botao" id="cadastrar" onclick="enviar()">Cadastrar</button>

            <p id="link-login">Já possui cadastro? <a href="../Login/index.html">Clique Aqui</a></p>
        </div>
    </div>

    <!-- Bibliotecas e códigos de terceiros -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>

    <!-- Máscaras -->
    <script>$('#cpf').mask('000.000.000-00', { reverse: true });</script>

</body>
<script>
    async function envia() {
        const email = document.getElementById("email").value;
        const name = document.getElementById("nome").value;
        const birthdate = document.getElementById("data-nasc").value;
        const password = document.getElementById("senha").value;

        const payload = {
            name,
            email,
            birthdate,
            password
        }

        try {
            const response = await axios.post('http://localhost:3000/api/users', payload);
            window.location.replace('../Login/login.html');
        } catch (error) {
            const aux = error.response.data.message;
            alert(aux);
        }
    }
</script>
<script src="../Cadastro/validacao.js"></script>

</html>